### Variables
@baseUrl = http://localhost:3000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImRiYmI2MjMxLWZkOWYtNGYyNC1hOWQzLWM2N2E3NTI3N2I1MiIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsImlzQWRtaW4iOmZhbHNlLCJmaXJzdE5hbWUiOiJKb2huIiwibmFtZSI6IkRvZSIsImlhdCI6MTc2NTk1ODYyOSwiZXhwIjoxNzY1OTYyMjI5fQ.zSSAOpIUjVdZ2rHmecQ-CpKNb2pOQUSaHRIY2kxcMcI

@CollectionId = e1b599cd-1a09-4aec-a364-891adb967dc2
@CardId = b820cb96-ee14-4f67-8754-3807ed42fe09
### ============================================
### AUTH ROUTES
### ============================================

### Register a new user
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "name": "Doe",
  "firstName": "John"
}

### Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### ============================================
### COLLECTION ROUTES (Require Authentication)
### ============================================

### Get user's collections
GET {{baseUrl}}/collections/user/
Authorization: Bearer {{token}}

### Get all public collections
GET {{baseUrl}}/collections/public/PuBliC
Authorization: Bearer {{token}}

### Create a new collection (private)
POST {{baseUrl}}/collections/
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "My First Collection",
  "description": "This is a test collection",
  "is_public": false
}

### Create a new collection (public)
POST {{baseUrl}}/collections/
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "Public Collection",
  "description": "This is a public collection",
  "is_public": true
}

### Get a specific collection by ID
GET {{baseUrl}}/collections/{{CollectionId}}
Authorization: Bearer {{token}}

### Update a collection
PUT {{baseUrl}}/collections/{{CollectionId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "Updated Collection Title",
  "description": "Updated description",
  "is_public": true
}

### Delete a collection
DELETE {{baseUrl}}/collections/{{CollectionId}}
Authorization: Bearer {{token}}

### ============================================
### CARD ROUTES (Require Authentication)
### ============================================

### create a new card
POST {{baseUrl}}/cards/
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "recto": "What is the capital of France?",
  "verso": "Paris",
  "recto_url": "https://a.travel-assets.com/findyours-php/viewfinder/images/res70/474000/474240-Left-Bank-Paris.jpg",
  "verso_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/CAMOU%2C_g%C3%A9n%C3%A9ral_Jacques%2C_Le_Gray%2C_Gallica.jpg/960px-CAMOU%2C_g%C3%A9n%C3%A9ral_Jacques%2C_Le_Gray%2C_Gallica.jpg",
  "collection_id": "{{CollectionId}}"
}

### Get a specific card by ID
GET {{baseUrl}}/cards/{{CardId}}
Authorization: Bearer {{token}}

### Delete a specific card by ID
DELETE {{baseUrl}}/cards/{{CardId}}
Authorization: Bearer {{token}}

### ============================================
### TEST SCENARIOS
### ============================================

### Register another user
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "user2@example.com",
  "password": "password456",
  "name": "Smith",
  "firstName": "Jane"
}

### Test duplicate email registration (should fail with 409)
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "name": "Duplicate",
  "firstName": "User"
}

### Test login with wrong password (should fail with 401)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "wrongpassword"
}

### Test accessing collection without token (should fail)
GET {{baseUrl}}/collections/user/

### Test creating collection with duplicate title (should fail with 409)
POST {{baseUrl}}/collections/
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "My First Collection",
  "description": "Duplicate title",
  "is_public": false
}
